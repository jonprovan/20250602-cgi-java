DATABASE NORMALIZATION,,,,,,,,,
- overall goal of database normalization is to reduce the data footprint and make data easier to manage,,,,,,,,,
"- this is done in a series of ""normal forms""",,,,,,,,,
"- each normal form (1NF, 2NF, etc.) contains everything from the previous normal form and adds something new",,,,,,,,,
"- First Normal Form (1NF) = primary key for each table, no lists (multiple values in one cell)",,,,,,,,,
"- Second Normal Form (2NF) = no partial dependencies (i.e., dependencies on only part of a primary key)",,,,,,,,,
- Third Normal Form (3NF) = no transitive dependencies (dependency on something other than the primary key),,,,,,,,,
,,,,,,,,,
KEY TYPES,,,,,,,,,
- candidate key = some portion of the data that could be used as a primary key,,,,,,,,,
- surrogate key = another portion of the data besides the designated primary key that's unique per record,,,,,,,,,
,,,,,,,,,
MAIN TABLE,,,,,,,,,
first_name,last_name,age,location,order,order_date,,,,
Doug,Milton,55,"Madison, WI","3 eggs, 1 loaf of bread, 2 pickles",Jan 1,,,,
Doug,Milton,55,"Madison, WI","4 batteries, 6 eggs",Jan 5,,,,
Doug,Milton,55,"Madison, WI","5 pickles, 7 eggs",Jan 8,,,,
Mary,Frances,23,"Honolulu, HI","3 reams of paper, 9 napkins",Jan 5,,,,
Mary,Frances,23,"Honolulu, HI","9 loaves of bread, 9 napkins",Jan 11,,,,
Albert,Queen,76,"Madison, WI","1 fork, 1 spoon, 1 ream of paper",Jan 9,,,,
,,,,,,,,,
FIRST NORMAL FORM,,"(PK in place, no lists)",,,,,,,
id,first_name,last_name,age,city,state,order_item_1,order_item_2,order_item_3,order_date
1,Doug,Milton,55,Madison,WI,3 eggs,1 loaf of bread,2 pickles,Jan 1
2,Doug,Milton,55,Madison,WI,4 batteries,6 eggs,null,Jan 5
3,Doug,Milton,55,Madison,WI,5 pickles,7 eggs,null,Jan 8
4,Mary,Frances,23,Honolulu,HI,3 reams of paper,9 napkins,null,Jan 5
5,Mary,Frances,23,Honolulu,HI,9 loaves of bread,9 napkins,null,Jan 11
6,Albert,Queen,76,Madison,WI,1 fork,1 spoon,1 ream of paper,Jan 9
,,,,,,,,,
order_id,order_item_id,first_name,last_name,age,city,state,order_item,order_date,
1,1,Doug,Milton,55,Madison,WI,3 eggs,Jan 1,
1,2,Doug,Milton,55,Madison,WI,1 loaf of bread,Jan 1,
1,3,Doug,Milton,55,Madison,WI,2 pickles,Jan 1,
2,1,Doug,Milton,55,Madison,WI,4 batteries,Jan 5,
2,2,Doug,Milton,55,Madison,WI,6 eggs,Jan 5,
3,1,Doug,Milton,55,Madison,WI,5 pickles,Jan 8,
3,2,Doug,Milton,55,Madison,WI,7 eggs,Jan 8,
4,1,Mary,Frances,23,Honolulu,HI,3 reams of paper,Jan 5,
4,2,Mary,Frances,23,Honolulu,HI,9 napkins,Jan 5,
5,1,Mary,Frances,23,Honolulu,HI,9 loaves of bread,Jan 11,
5,2,Mary,Frances,23,Honolulu,HI,9 napkins,Jan 11,
6,1,Albert,Queen,76,Madison,WI,1 fork,Jan 9,
6,2,Albert,Queen,76,Madison,WI,1 spoon,Jan 9,
6,3,Albert,Queen,76,Madison,WI,1 ream of paper,Jan 9,
,,,,,,,,,
SECOND NORMAL FORM,,"(no partial dependencies, taking orders out into a separate table)",,,,,,,
,,,,,,,,,
ORDER TABLE,,,,,,,,,
id,date,,,,,,,,
1,Jan 1,,,,,,,,
2,Jan 5,,,,,,,,
3,Jan 8,,,,,,,,
4,Jan 5,,,,,,,,
5,Jan 11,,,,,,,,
6,Jan 9,,,,,,,,
,,,,,,,,,
ORDER ITEM TABLE,,,,,,,,,
order_id,order_item_id,first_name,last_name,age,city,state,order_item,,
1,1,Doug,Milton,55,Madison,WI,3 eggs,,
1,2,Doug,Milton,55,Madison,WI,1 loaf of bread,,
1,3,Doug,Milton,55,Madison,WI,2 pickles,,
2,1,Doug,Milton,55,Madison,WI,4 batteries,,
2,2,Doug,Milton,55,Madison,WI,6 eggs,,
3,1,Doug,Milton,55,Madison,WI,5 pickles,,
3,2,Doug,Milton,55,Madison,WI,7 eggs,,
4,1,Mary,Frances,23,Honolulu,HI,3 reams of paper,,
4,2,Mary,Frances,23,Honolulu,HI,9 napkins,,
5,1,Mary,Frances,23,Honolulu,HI,9 loaves of bread,,
5,2,Mary,Frances,23,Honolulu,HI,9 napkins,,
6,1,Albert,Queen,76,Madison,WI,1 fork,,
6,2,Albert,Queen,76,Madison,WI,1 spoon,,
6,3,Albert,Queen,76,Madison,WI,1 ream of paper,,
,,,,,,,,,
THIRD NORMAL FORM (removing transitive dependencies),,,,,,,,,
"- lots of splitting here into other tables to remove these dependencies, like state depending on city, or city depending on first_name, etc.",,,,,,,,,
- we also deduplicated the order items so each piece of data is only in the database once,,,,,,,,,
,,,,,,,,,
STATE TABLE,,,CITY TABLE,,,,,,
id,name,,id,name,state_id,,,,
1,Wisconsin,,1,Madison,1,,,,
2,Hawaii,,2,Honolulu,2,,,,
,,,,Tiffany,1,,,,
,,,,,,,,,
ORDER TABLE,,,,CUSTOMER TABLE,,,,,
id,date,customer_id,,id,first_name,last_name,age,city_id,
1,Jan 1,1,,1,Doug,Milton,55,1,
2,Jan 5,1,,2,Mary,Frances,23,2,
3,Jan 8,1,,3,Albert,Queen,76,1,
4,Jan 5,2,,,,,,,
5,Jan 11,2,,,,,,,
6,Jan 9,3,,,,,,,
,,,,,,,,,
ORDER ITEM TABLE,,(note that you COULD remove the id column),,,ITEM TABLE,,,,
id,order_id,order_item,quantity,,id,name,,,
1,1,1,3,,1,egg,,,
2,1,2,1,,2,bread loaf,,,
3,1,3,2,,3,pickle,,,
4,2,4,4,,4,battery,,,
5,2,1,6,,5,ream of paper,,,
6,3,3,5,,6,napkin,,,
7,3,1,7,,7,fork,,,
8,4,5,3,,8,spoon,,,
9,4,6,9,,,,,,
10,5,2,9,,,,,,
11,5,6,9,,,,,,
12,6,7,1,,,,,,
13,6,8,1,,,,,,
14,6,5,1,,,,,,
,(these two make a CK),,,,,,,,
